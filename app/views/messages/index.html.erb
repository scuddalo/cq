<%= 'Inbox' %> | <%= link_to 'Sent', message_sent_messages_path %>
<h5>Listing Inbox messages</h5>

<table>
  <tr>
    <th>From </th>
    <th>Content</th>
    <th>Read</th>
    <th>Accepted</th>
		<th>Date</th>
  </tr>

<% for message in @messages %>
  <tr>
    <td><%=h User.find(message.from_profile_id).login %></td>
    <td><%=link_to truncate(message.content,10), show_message_message_path(message.id),:method =>:post%></td>
    <td><%= message.read == true ? "Read" : "Unread" %></td>
    <td><%=link_to "Accept", accept_message_message_path(message.id),:method =>:post if message.is_accepted.nil? %><%=" | " if message.is_accepted.nil?%> <%=link_to "Reject", reject_message_message_path(message.id),:method =>:post if message.is_accepted.nil? %><%= message.is_accepted == true ? "Accepted" : "Rejected" unless message.is_accepted.nil?%></td>
    <td><%= message.created_at.to_s(:short) %></td>
  </tr>
<% end %>
</table>
<br>
<h5>New friend request</h5>
<table cellspacing=3 cellpadding=3>
  <tr>
    <th>From </th>
    <th>To</th>
    <th>Subject</th>
    <th>Accept/Reject</th>
		<th>Date</th>
  </tr>
<% for invitation in @invitations %>
  <tr>
    <td><%=h User.find(invitation.from_profile_id).login %></td>
<td><%=h User.find(invitation.to_profile_id).login %></td>
<td><%= "One invitation"%></td>
<td><%= link_to 'Accept', follow_path(:profile_id => invitation.to_profile_id, :follow_profile_id => invitation.from_profile_id), :method => :post -%> | <%= link_to 'Reject', unfollow_path(:profile_id => invitation.to_profile_id, :follow_profile_id => invitation.from_profile_id), :method => :post -%></td>
        <td><%= invitation.created_at.to_s(:short) %></td>
  </tr>
<% end %>
</table>


<br />

<%#= link_to 'Creat New message', new_message_path %>
